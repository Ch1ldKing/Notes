# 1. 初始化Winsock

```cpp
BOOL InitWsa()
{
    WORD wVersionRequested; // 定义请求的 Winsock 版本
    WSADATA wsaData; // Winsock 数据结构体
    int err; // 错误码
    wVersionRequested = MAKEWORD(2, 2); // 请求 Winsock 2.2 版本
    err = WSAStartup(wVersionRequested, &wsaData); // 初始化 Winsock
    if (err != 0)
    {
        printf("加载 winsock 失败， 错误代码为: %d\n", WSAGetLastError()); // 输出错误信息
        return FALSE; // 返回失败
    }
    if (LOBYTE(wsaData.wVersion) != 2 || HIBYTE(wsaData.wVersion) != 2)
    {
        printf("不能找到正确的 winsock 版本\n"); // 输出版本不正确信息
        WSACleanup(); // 释放 Winsock 资源
        return FALSE; // 返回失败
    }
    return TRUE; // 返回成功
}
```

