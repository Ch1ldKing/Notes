### 5.1 启用和禁用段级与页级保护

段级保护通过设置CR0寄存器的PE标志进入保护模式后自动启用。在保护模式下，段级保护始终生效，但可以通过设置所有段选择器和描述符的权限级别（DPL）为0，绕过段权限隔离，仅保留段界限检查和类型检查。页级保护在启用分页（CR0寄存器的PG标志被设置）时生效，无法直接关闭，但可以通过清除CR0寄存器的WP标志或将所有页目录和页表条目的读写（R/W）标志及用户/超级用户（U/S）标志设置为允许用户可写，达到绕过保护的效果。
### 5.2 段级和页级保护中使用的字段与标志

段级保护依赖以下字段：描述符类型（S标志）区分系统段与代码/数据段，类型字段（Type）指定段类型，段界限（Limit）定义段大小，粒度标志（G标志）控制单位大小，扩展方向标志（E标志）用于数据段扩展方向，权限级别（DPL、RPL、CPL）定义和控制访问权限。页级保护使用以下字段：用户/超级用户标志（U/S标志）区分页面权限级别，读写标志（R/W标志）控制写访问权限，执行禁用标志（XD标志）控制页面执行权限。
#### 5.2.1 64位模式下的代码段描述符

在64位模式中，代码段描述符的基地址和界限字段被忽略，其他字段继续发挥作用。描述符的第53位（L标志）决定处理器操作模式：L=0为兼容模式，L=1为64位模式，此时CS.D必须为0（默认操作数大小32位，地址大小64位）。权限检查仍基于DPL，与32位模式一致。在IA-32e模式中，设置CS.L和CS.D为非法组合（如L=1，D=1）会触发#GP（一般保护异常）。
