# Abstraction and User-Defined Types
ğŸ“•æ•°æ®æŠ½è±¡ï¼šæŒ‡ç”±ä¸€ç»„æ“ä½œæ‰€åˆ»ç”»çš„æ•°æ®ç±»å‹
ä¼ ç»Ÿçš„ç±»å‹å…³æ³¨æ•°æ®çš„å…·ä½“è¡¨ç¤ºï¼Œè€ŒæŠ½è±¡ç±»å‹å¼ºè°ƒâ€œä½œç”¨äºæ•°æ®ä¸Šçš„æ“ä½œâ€ï¼Œæ— éœ€å…³æ³¨æ•°æ®å¦‚ä½•å­˜å‚¨ï¼Œè€Œæ˜¯è®¾è®¡å¹¶ä½¿ç”¨æ“ä½œ
å³**ADTæ˜¯ç”±æ“ä½œå®šä¹‰çš„ï¼Œä¸å…¶å†…éƒ¨å¦‚ä½•å®ç°æ— å…³ï¼**
æ¯”å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªæŠ½è±¡çš„Boolç±»ï¼ŒBoolå¯ä»¥ç”±å¾ˆå¤šçš„ä¸œè¥¿å®ç°ï¼Œä½†å®ƒçš„æ“ä½œå†³å®šäº†å®ƒçš„æ€§è´¨
![image.png](https://s2.loli.net/2024/05/27/cG5dP7om1JSClVT.png)
# ç±»å‹ä¸æ“ä½œ
## ç±»å‹
å¯å˜ç±»å‹å’Œä¸å¯å˜ç±»å‹
**åŒºåˆ«**ï¼šå¯å˜ç±»å‹æä¾›äº†å¯æ”¹å˜å†…éƒ¨æ•°æ®çš„å€¼çš„æ“ä½œï¼Œè€Œä¸å˜ç±»å‹åªèƒ½æ„é€ æ–°çš„å¯¹è±¡
## æ“ä½œ
### æ„é€ å™¨
åˆå§‹åŒ–å¯¹è±¡çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬åº•å±‚æ•°æ®ç»“æ„ç­‰ï¼ŒåŒæ—¶éªŒè¯ä¸å˜æ€§ï¼Œæœ‰ä»¥ä¸‹è¯´æ³•ï¼š
1. å¯ä»¥ä¸å¸¦å‚æ•°ï¼Œå¹¶åˆ›é€ ä¸€ä¸ªç©ºå¯¹è±¡
2. å¯ä»¥ä¸å¸¦å‚æ•°ï¼Œå¹¶åˆ›é€ ä¸€ä¸ªæœ‰åˆå§‹é»˜è®¤å€¼çš„å¯¹è±¡
3. å¯ä»¥å¸¦å‚æ•°ï¼Œåˆ›é€ ä¸€ä¸ªåˆå§‹åŒ–å¯¹è±¡
### å˜å€¼å™¨
å¦‚æœè¿”å›å€¼ä¸ºvoidï¼Œåˆ™å¿…ç„¶æ„å‘³ç€å®ƒæ”¹å˜äº†å¯¹è±¡çš„æŸäº›å†…éƒ¨çŠ¶æ€
ä¹Ÿæœ‰å¯èƒ½éç©º
# ADTä¸¾ä¾‹
![image.png](https://s2.loli.net/2024/05/27/Lxfc6sNFXORrZMC.png)
# è®¾è®¡ADT
è®¾è®¡å¥½çš„ADTï¼Œé â€œç»éªŒæ³•åˆ™â€ï¼Œæä¾›ä¸€ç»„æ“ä½œï¼Œè®¾è®¡å…¶è¡Œä¸ºè§„çº¦ spec
1. è®¾è®¡ç®€æ´ã€ä¸€è‡´çš„æ“ä½œ
2. è¶³ä»¥æ”¯æŒclientå¯¹æ•°æ®æ‰€åšçš„æ‰€æœ‰æ“ä½œéœ€è¦ï¼Œä¸”ç”¨æ“ä½œæ»¡è¶³clientéœ€è¦çš„éš¾åº¦è¦ä½
3. è¦ä¹ˆæŠ½è±¡ã€è¦ä¹ˆå…·ä½“ï¼Œä¸è¦æ··åˆ---è¦ä¹ˆé’ˆå¯¹æŠ½è±¡è®¾è®¡ï¼Œè¦ä¹ˆé’ˆå¯¹å…·ä½“åº”ç”¨çš„è®¾è®¡
# è¡¨ç¤ºç‹¬ç«‹æ€§
è¡¨ç¤ºç‹¬ç«‹æ€§ï¼šclientä½¿ç”¨ADTæ—¶æ— éœ€è€ƒè™‘å…¶å†…éƒ¨å¦‚ä½•å®ç°ï¼ŒADTå†…éƒ¨è¡¨ç¤ºçš„å˜åŒ–ä¸åº”å½±å“å¤–éƒ¨specå’Œå®¢æˆ·ç«¯
è¿™æ„å‘³ç€å½“æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æ— éœ€é€šçŸ¥å®¢æˆ·ç«¯ä¹Ÿæ— éœ€ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç ï¼Œå› ä¸ºä¼˜åŒ–åä»ç„¶æ»¡è¶³specã€‚è¿™å°±æ˜¯RIçš„ä½œç”¨
ğŸŒ°ä¾‹å­ï¼š
```Java
è¿åRI
/**
 * Represents a family that lives in a household together.
 * A family always has at least one person in it.
 * Families are mutable.
 */
class Family {
    public List<Person> people;
    public List<Person> getMembers() {
        return people;
    }
}

void client1(Family f) {
    Person baby = f.people.get(f.people.size() - 1); // ç›´æ¥è®¿é—®å†…éƒ¨è¡¨ç¤ºï¼Œè¿åå°è£…
    // ...
}
```
é—®é¢˜ï¼šç›´æ¥æš´éœ²äº†peopleçš„å†…éƒ¨ï¼Œå¹¶ä¸”æ²¡æœ‰å°è£…å¥½ã€‚æŸ¥è¯¢æ–¹æ³•ä¾èµ–äºå…·ä½“å†…éƒ¨æœ‰å¤šå°‘ä¸ªå…ƒç´ è¿™ç±»çš„å®ç°ç»†èŠ‚
```Java
æ”¹è¿›RI
/**
 * Represents a family that lives in a household together.
 * A family always has at least one person in it.
 * Families are mutable.
 */
class Family {
    // ä½¿ç”¨Setä»£æ›¿Listï¼Œä»¥é¿å…é‡å¤å…ƒç´ 
    public Set<Person> people;

    /**
     * @return a list containing all the members of the family, with no duplicates.
     */
    public List<Person> getMembers() {
        return new ArrayList<>(people);
    }
}

void client3(Family f) {
    // é€šè¿‡getMembersæ–¹æ³•è·å–æˆå‘˜åˆ—è¡¨ï¼Œè€Œä¸æ˜¯ç›´æ¥è®¿é—®å†…éƒ¨è¡¨ç¤º
    Person anybody = f.getMembers().get(0); 
    // ...
}
```
1. é‡‡ç”¨Setï¼Œé˜²æ­¢æˆå‘˜é‡å¤ï¼ŒåŒæ—¶æ”¹è¿›äº†Listçš„å®ç°ç»†èŠ‚é—®é¢˜
2. é€šè¿‡getmembersæ¥è·å–æˆå‘˜åˆ—è¡¨ï¼Œè€Œä¸æ˜¯ç›´æ¥æš´éœ²å†…éƒ¨peopleï¼Œé˜²æ­¢ä¿®æ”¹
3. getMembersä¸ç›´æ¥è¿”å›peopleï¼Œè€Œæ˜¯å¤åˆ¶ä¸€ä¸ªåˆ—è¡¨ï¼Œé˜²æ­¢è¡¨ç¤ºæš´éœ²
# æµ‹è¯•ä¸€ä¸ªADT
1. ç”¨observersæµ‹è¯•creatorsã€producersã€mutators
2. è°ƒç”¨ æµ‹è¯•observers