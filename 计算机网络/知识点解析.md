# 链路层
## CRC循环校验码
### 解释
用作检错，一般来说出错了直接撇掉。D是数据，R是CRC比特，为r位，还会得到一个生成多项式G，为r+1位，也就是比特模式。
G是提前商量好的，发送和接收方都知道用它校验
### 计算带校验码的数据
假设CRC编码的生成比特模式G=10011，则对数据D=1010101010
进行CRC编码后的<D,R>是
过程：
1. 需要给D末位补r个零，也就是$×2^r$
2. 用模2除法除以G，也就是每位异或运算
3. 最后的余数就是R，如果不足r位，高位补0
### 接收方检验码字
直接接收到的数据再次模2除法除以G，如果最后的余数不为0，那就有错
## Internet校验和
## 信道划分MAC协议
### TDMA
![image.png](https://s2.loli.net/2024/11/23/b4528olRZWOGjUn.png)
每个站点在每个周期占用固定长的时间来传输数据，没用的时隙有空闲
### FDMA
![image.png](https://s2.loli.net/2024/11/23/xoJWg4eT9ZVSz36.png)
每个站点用一个固定的频带传输，没传东西的频带空闲
## 随机访问MAC协议
利用信道全部速率发送分组，不划分，并且不进行发送前的结点之间商量
这就导致同时有多个结点传输会发生冲突
所以需要定义 如何检测冲突 如何从冲突中恢复
### 时隙ALOHA协议
只需要同步时隙。所有帧的大小都相同，因为时间被划分为等长的时隙，结点只能在**时隙开始**的时候发送帧。发送的时候，因为只能在时隙开始时发送，所以都是同一时刻发送的，如果冲突了所有的帧都会损坏，冲突的结点在下一个时隙以**随机概率p**进行重传
缺点：
- 冲突的时隙就浪费了
- 有可能大家概率都是这个时隙不传，导致空闲
- 也许传输分组浪费的时间早就够你检测一下冲突了
### 效率
假设：有N个结点，都有一堆帧要传，在每个时隙都是概率p发送数据
单个结点：发送成功的概率是$p(1-p)^{N-1}